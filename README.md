# üöÄ –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ Mac

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **WebRTC —á–µ—Ä–µ–∑ SimplePeer** –¥–ª—è –ø—Ä—è–º–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ MediaStream, –∫–∞–∫ –≤ deskreen. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –∏ **–Ω–∏–∑–∫—É—é –∑–∞–¥–µ—Ä–∂–∫—É**.

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ WebRTC

1. **–ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ MediaStream** - –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ JPEG
2. **–ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** - –≤–∏–¥–µ–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ WebRTC
3. **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** - –Ω–∞—Ç–∏–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫–∞
4. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU, —Ç–∞–∫ –∫–∞–∫ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ª–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä

## üìã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Renderer       ‚îÇ  ‚Üê MediaStream —á–µ—Ä–µ–∑ getUserMedia
‚îÇ  (Electron)     ‚îÇ  ‚Üê SimplePeer (initiator)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ Socket.IO (signaling)
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Main Process   ‚îÇ  ‚Üê Socket.IO Server
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ Socket.IO (signaling)
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Browser Client ‚îÇ  ‚Üê SimplePeer (receiver)
‚îÇ                 ‚îÇ  ‚Üê MediaStream –≤ <video>
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
npm start
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥—Ä–µ—Å, –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `http://192.168.1.100:3001`)

### 4. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä BetterDisplay –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –ø–ª–∞–≤–Ω–æ–π —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–µ–π!

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Renderer Process** (Electron) —Å–æ–∑–¥–∞–µ—Ç MediaStream —á–µ—Ä–µ–∑ `getUserMedia` —Å `chromeMediaSource`
2. **SimplePeer** –≤ renderer —Å–æ–∑–¥–∞–µ—Ç WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–∞–∫ initiator
3. **Socket.IO** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ WebRTC —Å–∏–≥–Ω–∞–ª–∞–º–∏ (SDP/ICE)
4. **Browser Client** –ø–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∏ —Å–æ–∑–¥–∞–µ—Ç SimplePeer –∫–∞–∫ receiver
5. **MediaStream** –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ WebRTC –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ `<video>`

## üìä –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ú–µ—Ç–æ–¥ –ø–µ—Ä–µ–¥–∞—á–∏ | MediaStream —á–µ—Ä–µ–∑ WebRTC |
| FPS | 60+ FPS |
| –ó–∞–¥–µ—Ä–∂–∫–∞ | –ù–∏–∑–∫–∞—è |
| –ö–∞—á–µ—Å—Ç–≤–æ | –ù–∞—Ç–∏–≤–Ω–æ–µ |
| –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU | –ù–∏–∑–∫–∞—è (–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ) |

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∏–¥–µ–æ

–í —Ñ–∞–π–ª–µ `renderer-webrtc.html` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã MediaStream:

```javascript
async function getDesktopSourceStream(sourceID, width = null, height = null, minFrameRate = 30, maxFrameRate = 60) {
  // –ò–∑–º–µ–Ω–∏—Ç–µ minFrameRate –∏ maxFrameRate –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è FPS
  // –ò–∑–º–µ–Ω–∏—Ç–µ width –∏ height –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebRTC

–í —Ñ–∞–π–ª–µ `renderer-webrtc.html`:

```javascript
const peer = new SimplePeer({
  initiator: true,
  stream: stream,
  config: {
    iceServers: [] // –î–æ–±–∞–≤—å—Ç–µ STUN/TURN —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  }
});
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### WebRTC –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å Electron (View ‚Üí Toggle Developer Tools)

### –ù–µ—Ç –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ BetterDisplay –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ "–ó–∞–ø–∏—Å—å —ç–∫—Ä–∞–Ω–∞" –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

### –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏
2. –£–º–µ–Ω—å—à–∏—Ç–µ maxFrameRate –≤ `renderer-webrtc.html`
3. –î–æ–±–∞–≤—å—Ç–µ STUN —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –ª—É—á—à–µ–≥–æ NAT traversal

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### SimplePeer

- **Initiator** (renderer): —Å–æ–∑–¥–∞–µ—Ç WebRTC offer
- **Receiver** (browser): —Å–æ–∑–¥–∞–µ—Ç WebRTC answer
- **Signaling**: —á–µ—Ä–µ–∑ Socket.IO

### MediaStream

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `navigator.mediaDevices.getUserMedia()` —Å `chromeMediaSource`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `desktop` –∏ `screen` –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞

### Socket.IO

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è signaling (SDP/ICE –æ–±–º–µ–Ω)
- –ù–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –≤–∏–¥–µ–æ –¥–∞–Ω–Ω—ã–µ
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —Å–∏–≥–Ω–∞–ª–æ–≤

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è WebRTC —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è signaling. –î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS/WSS
- –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TURN —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è NAT traversal

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å Electron
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `npm install`

